<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CohesiveGov Initiatives Dashboard</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --text-color: #333;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #2980b9;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            transition: all 0.3s;
            overflow-y: auto;
        }
        
        .sidebar h2 {
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section h3 {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin-right: 10px;
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .dashboard-intro {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .legend {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .status-planned {
            background-color: var(--warning-color);
        }
        
        .status-in-progress {
            background-color: var(--info-color);
        }
        
        .status-completed {
            background-color: var(--success-color);
        }
        
        /* Table View Styles */
        .initiatives-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .initiatives-table th, 
        .initiatives-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .initiatives-table th {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .initiatives-table tr:hover {
            background-color: var(--light-gray);
            cursor: pointer;
        }
        
        .initiatives-table .status-cell {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-value {
            height: 100%;
            border-radius: 4px;
        }
        
        .planned-text {
            color: var(--warning-color);
            font-weight: bold;
        }
        
        .in-progress-text {
            color: var(--info-color);
            font-weight: bold;
        }
        
        .completed-text {
            color: var(--success-color);
            font-weight: bold;
        }
        
        /* Initiative Details */
        .initiative-details {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .initiative-details h2 {
            color: var(--primary-color);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .initiative-details .subtitle {
            color: #666;
            margin-bottom: 15px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .detail-section {
            margin-bottom: 20px;
        }
        
        .detail-section h3 {
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 5px;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .tag {
            background-color: var(--light-gray);
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .main-content {
                order: 1;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>Filter Initiatives</h2>
            
            <div class="filter-section">
                <h3>Mission Areas</h3>
                <div id="mission-areas-filters">
                    <!-- Mission area filters will be populated here -->
                </div>
            </div>
            
            <div class="filter-section">
                <h3>Status</h3>
                <div id="status-filters">
                    <div class="checkbox-item">
                        <input type="checkbox" id="status-planned" checked>
                        <label for="status-planned">Planned</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="status-in-progress" checked>
                        <label for="status-in-progress">In Progress</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="status-completed" checked>
                        <label for="status-completed">Completed</label>
                    </div>
                </div>
            </div>
            
            <div class="filter-section">
                <h3>Tags</h3>
                <div id="tags-filters">
                    <!-- Tag filters will be populated here -->
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <h1>Government Initiatives Dashboard</h1>
            
            <div class="dashboard-intro">
                <p>This dashboard shows major government initiatives like a flight schedule – you can click any initiative to see its full plan, including objectives and progress updates.</p>
                <div class="legend">
                    <div class="legend-item">
                        <div class="status-indicator status-planned"></div>
                        <span>Planned</span>
                    </div>
                    <div class="legend-item">
                        <div class="status-indicator status-in-progress"></div>
                        <span>In Progress</span>
                    </div>
                    <div class="legend-item">
                        <div class="status-indicator status-completed"></div>
                        <span>Completed</span>
                    </div>
                </div>
            </div>
            
            <table class="initiatives-table">
                <thead>
                    <tr>
                        <th>Initiative Name</th>
                        <th>Mission Area</th>
                        <th>Status</th>
                        <th>Progress</th>
                        <th>Next Milestone</th>
                    </tr>
                </thead>
                <tbody id="initiatives-table-body">
                    <!-- Initiative data will be populated here -->
                </tbody>
            </table>
            
            <div class="initiative-details" id="initiative-details" style="display: none;">
                <h2>
                    <span id="detail-title">Initiative Title</span>
                    <button class="close-button" id="close-details">×</button>
                </h2>
                <div class="subtitle" id="detail-subtitle">Mission Area · Status</div>
                
                <div class="detail-grid">
                    <div class="detail-section">
                        <h3>Vision</h3>
                        <p id="detail-vision"></p>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Initial State</h3>
                        <p id="detail-initial-state"></p>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Objectives</h3>
                        <ul id="detail-objectives"></ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Roadmap</h3>
                        <ul id="detail-roadmap"></ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Current Status</h3>
                        <p id="detail-current-status"></p>
                        <p><strong>Progress:</strong> <span id="detail-progress"></span></p>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Tags</h3>
                        <div class="tags-container" id="detail-tags"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for initiatives
        const initiatives = [
            {
                name: "Dismantle DEI Act",
                missionArea: "Social Subjects",
                status: "Planned",
                progress: "0%",
                nextMilestone: "Q1 2025: Draft bill",
                vision: "Eliminate DEI initiatives across the government.",
                initialState: "DEI initiatives are currently in place.",
                objectives: ["Draft legislation", "Gain legislative support", "Enact the law"],
                roadmap: ["Q1 2025: Draft bill", "Q2 2025: Lobbying and discussions", "Q3 2025: Vote"],
                currentStatus: "Bill drafting in progress.",
                tags: ["Social Subjects", "Government Operations"]
            },
            {
                name: "Joint Legislation Development Team",
                missionArea: "Government Operations",
                status: "In Progress",
                progress: "50%",
                nextMilestone: "Q1 2025: Platform development",
                vision: "Improve legislative efficiency through collaboration.",
                initialState: "Separate legislative processes lead to delays.",
                objectives: ["Form a joint team", "Develop collaborative platforms", "Implement joint sessions"],
                roadmap: ["Q4 2024: Team formation", "Q1 2025: Platform development", "Q2 2025: Pilot sessions"],
                currentStatus: "Platform development ongoing.",
                tags: ["Government Operations", "Technology and Innovation"]
            },
            {
                name: "Executive Branch Ops Synergy",
                missionArea: "Government Operations",
                status: "Completed",
                progress: "100%",
                nextMilestone: "Completed",
                vision: "Enhance synergy across executive departments.",
                initialState: "Siloed operations in different branches.",
                objectives: ["Identify synergy opportunities", "Implement joint projects", "Establish communication channels"],
                roadmap: ["Q3 2024: Opportunity assessment", "Q4 2024: Project implementation", "Q1 2025: Channel setup"],
                currentStatus: "Communication channels established and functioning.",
                tags: ["Government Operations"]
            },
            {
                name: "Initiative Building Block",
                missionArea: "Government Operations",
                status: "Planned",
                progress: "0%",
                nextMilestone: "Q2 2025: Template creation",
                vision: "Standardize initiative development process.",
                initialState: "Inconsistent approaches to initiative creation.",
                objectives: ["Develop a template", "Train staff on the template", "Implement the template across departments"],
                roadmap: ["Q2 2025: Template creation", "Q3 2025: Training sessions", "Q4 2025: Full implementation"],
                currentStatus: "Template development has begun.",
                tags: ["Government Operations", "Process Improvement"]
            },
            {
                name: "Exec Directive-DEIA Fed Workforce",
                missionArea: "Civil Rights",
                status: "In Progress",
                progress: "75%",
                nextMilestone: "Q2 2025: Policy implementation",
                vision: "Promote diversity, equity, inclusion, and accessibility in the federal workforce.",
                initialState: "Underrepresentation in some areas.",
                objectives: ["Review current workforce data", "Develop strategies for improvement", "Implement new policies"],
                roadmap: ["Q4 2024: Data review", "Q1 2025: Strategy development", "Q2 2025: Policy implementation"],
                currentStatus: "Policy implementation underway.",
                tags: ["Civil Rights", "Government Operations", "Human Resources"]
            }
        ];

        // DOM Elements
        const initiativesTableBody = document.getElementById('initiatives-table-body');
        const initiativeDetails = document.getElementById('initiative-details');
        const closeDetailsButton = document.getElementById('close-details');
        const missionAreasFilters = document.getElementById('mission-areas-filters');
        const tagsFilters = document.getElementById('tags-filters');
        
        // Extract unique mission areas and tags
        const uniqueMissionAreas = [...new Set(initiatives.map(initiative => initiative.missionArea))];
        const uniqueTags = [...new Set(initiatives.flatMap(initiative => initiative.tags || []))];

        // Initialize the dashboard
        function initDashboard() {
            // Build the sidebar filters first
            populateMissionAreaFilters();
            populateTagFilters();
            setupEventListeners();
            
            // Then populate the table with all initiatives
            populateInitiativesTable();
            
            // Add a debugging message to console
            console.log('Dashboard initialized with', initiatives.length, 'initiatives');
            console.log('Mission Areas:', uniqueMissionAreas);
            console.log('Tags:', uniqueTags);
        }

        // Format status with color indicator
        function formatStatus(status) {
            let statusClass = '';
            let textClass = '';
            
            if (status === 'Planned') {
                statusClass = 'status-planned';
                textClass = 'planned-text';
            } else if (status === 'In Progress') {
                statusClass = 'status-in-progress';
                textClass = 'in-progress-text';
            } else if (status === 'Completed') {
                statusClass = 'status-completed';
                textClass = 'completed-text';
            }
            
            return `
                <div class="status-cell">
                    <div class="status-indicator ${statusClass}"></div>
                    <span class="${textClass}">${status}</span>
                </div>
            `;
        }

        // Format progress bar
        function formatProgressBar(progress, status) {
            const progressValue = parseInt(progress);
            let color = '#ccc';
            
            if (status === 'Planned') {
                color = '#f39c12'; // Warning color
            } else if (status === 'In Progress') {
                color = '#3498db'; // Info color
            } else if (status === 'Completed') {
                color = '#2ecc71'; // Success color
            }
            
            return `
                <div class="progress-bar">
                    <div class="progress-value" style="width: ${progressValue}%; background-color: ${color};"></div>
                </div>
                <span>${progress}</span>
            `;
        }

        // Populate initiatives table
        function populateInitiativesTable() {
            initiativesTableBody.innerHTML = '';
            
            initiatives.forEach(initiative => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${initiative.name}</td>
                    <td>${initiative.missionArea}</td>
                    <td>${formatStatus(initiative.status)}</td>
                    <td>${formatProgressBar(initiative.progress, initiative.status)}</td>
                    <td>${initiative.nextMilestone}</td>
                `;
                
                row.addEventListener('click', () => showInitiativeDetails(initiative));
                initiativesTableBody.appendChild(row);
            });
        }

        // Populate mission area filters
        function populateMissionAreaFilters() {
            missionAreasFilters.innerHTML = '';
            
            uniqueMissionAreas.forEach(area => {
                const checkbox = document.createElement('div');
                checkbox.className = 'checkbox-item';
                const id = `mission-${area.replace(/\s+/g, '-').toLowerCase()}`;
                
                checkbox.innerHTML = `
                    <input type="checkbox" id="${id}" checked>
                    <label for="${id}">${area}</label>
                `;
                missionAreasFilters.appendChild(checkbox);
                
                // Ensure the checkbox has a change event listener
                const checkboxInput = checkbox.querySelector('input');
                checkboxInput.addEventListener('change', filterInitiatives);
            });
        }

        // Populate tag filters
        function populateTagFilters() {
            tagsFilters.innerHTML = '';
            
            uniqueTags.forEach(tag => {
                const checkbox = document.createElement('div');
                checkbox.className = 'checkbox-item';
                const id = `tag-${tag.replace(/\s+/g, '-').toLowerCase()}`;
                
                checkbox.innerHTML = `
                    <input type="checkbox" id="${id}">
                    <label for="${id}">${tag}</label>
                `;
                tagsFilters.appendChild(checkbox);
                
                // Ensure the checkbox has a change event listener
                const checkboxInput = checkbox.querySelector('input');
                checkboxInput.addEventListener('change', filterInitiatives);
            });
        }

        // Show initiative details
        function showInitiativeDetails(initiative) {
            // Set initiative details
            document.getElementById('detail-title').textContent = initiative.name;
            document.getElementById('detail-subtitle').textContent = `${initiative.missionArea} · ${initiative.status}`;
            document.getElementById('detail-vision').textContent = initiative.vision;
            document.getElementById('detail-initial-state').textContent = initiative.initialState;
            document.getElementById('detail-current-status').textContent = initiative.currentStatus;
            document.getElementById('detail-progress').textContent = initiative.progress;
            
            // Set objectives
            const objectivesList = document.getElementById('detail-objectives');
            objectivesList.innerHTML = '';
            initiative.objectives.forEach(objective => {
                const li = document.createElement('li');
                li.textContent = objective;
                objectivesList.appendChild(li);
            });
            
            // Set roadmap
            const roadmapList = document.getElementById('detail-roadmap');
            roadmapList.innerHTML = '';
            initiative.roadmap.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                roadmapList.appendChild(li);
            });
            
            // Set tags
            const tagsContainer = document.getElementById('detail-tags');
            tagsContainer.innerHTML = '';
            if (initiative.tags && initiative.tags.length > 0) {
                initiative.tags.forEach(tag => {
                    const tagSpan = document.createElement('span');
                    tagSpan.className = 'tag';
                    tagSpan.textContent = tag;
                    tagsContainer.appendChild(tagSpan);
                });
            } else {
                tagsContainer.innerHTML = '<span>No tags assigned</span>';
            }
            
            // Show details panel
            initiativeDetails.style.display = 'block';
        }

        // Filter initiatives based on selected filters
        function filterInitiatives() {
            const selectedMissionAreas = [];
            const selectedStatuses = [];
            const selectedTags = [];
            
            // Get selected mission areas
            document.querySelectorAll('#mission-areas-filters input:checked').forEach(checkbox => {
                const areaId = checkbox.id.replace('mission-', '').replace(/-/g, ' ');
                const capitalizedArea = areaId.split(' ')
                    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                    .join(' ');
                selectedMissionAreas.push(capitalizedArea);
            });
            
            // Get selected statuses
            document.querySelectorAll('#status-filters input:checked').forEach(checkbox => {
                if (checkbox.id === 'status-planned') selectedStatuses.push('Planned');
                if (checkbox.id === 'status-in-progress') selectedStatuses.push('In Progress');
                if (checkbox.id === 'status-completed') selectedStatuses.push('Completed');
            });
            
            // Get selected tags
            document.querySelectorAll('#tags-filters input:checked').forEach(checkbox => {
                const tagId = checkbox.id.replace('tag-', '').replace(/-/g, ' ');
                const capitalizedTag = tagId.split(' ')
                    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                    .join(' ');
                selectedTags.push(capitalizedTag);
            });
            
            // Debug logging
            console.log('Selected Mission Areas:', selectedMissionAreas);
            console.log('Selected Statuses:', selectedStatuses);
            console.log('Selected Tags:', selectedTags);
            
            // Filter initiatives
            const filteredInitiatives = initiatives.filter(initiative => {
                const missionAreaMatch = selectedMissionAreas.length === 0 || 
                                        selectedMissionAreas.includes(initiative.missionArea);
                
                const statusMatch = selectedStatuses.length === 0 || 
                                   selectedStatuses.includes(initiative.status);
                
                const tagMatch = selectedTags.length === 0 || 
                               (initiative.tags && initiative.tags.some(tag => selectedTags.includes(tag)));
                
                return missionAreaMatch && statusMatch && (selectedTags.length === 0 || tagMatch);
            });
            
            console.log('Filtered Initiatives:', filteredInitiatives);
            
            // Update table with filtered initiatives
            initiativesTableBody.innerHTML = '';
            
            if (filteredInitiatives.length === 0) {
                // Show a message when no initiatives match the filters
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" style="text-align: center; padding: 20px;">
                        No initiatives match the selected filters. Try adjusting your filter criteria.
                    </td>
                `;
                initiativesTableBody.appendChild(row);
            } else {
                // Populate with filtered initiatives
                filteredInitiatives.forEach(initiative => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${initiative.name}</td>
                        <td>${initiative.missionArea}</td>
                        <td>${formatStatus(initiative.status)}</td>
                        <td>${formatProgressBar(initiative.progress, initiative.status)}</td>
                        <td>${initiative.nextMilestone}</td>
                    `;
                    
                    row.addEventListener('click', () => showInitiativeDetails(initiative));
                    initiativesTableBody.appendChild(row);
                });
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Close details panel
            closeDetailsButton.addEventListener('click', () => {
                initiativeDetails.style.display = 'none';
            });
            
            // Set up status filter checkboxes
            const statusCheckboxes = document.querySelectorAll('#status-filters input[type="checkbox"]');
            statusCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', filterInitiatives);
            });
            
            // Add reset button
            const sidebar = document.querySelector('.sidebar');
            const resetButton = document.createElement('button');
            resetButton.textContent = 'Reset All Filters';
            resetButton.style.marginTop = '20px';
            resetButton.style.padding = '8px 16px';
            resetButton.style.backgroundColor = '#e74c3c';
            resetButton.style.color = 'white';
            resetButton.style.border = 'none';
            resetButton.style.borderRadius = '4px';
            resetButton.style.cursor = 'pointer';
            resetButton.style.width = '100%';
            
            resetButton.addEventListener('click', () => {
                // Reset all checkboxes
                const allCheckboxes = document.querySelectorAll('.sidebar input[type="checkbox"]');
                allCheckboxes.forEach(cb => {
                    if (cb.id.startsWith('mission-')) {
                        cb.checked = true; // Check all mission areas
                    } else if (cb.id.startsWith('status-')) {
                        cb.checked = true; // Check all statuses
                    } else if (cb.id.startsWith('tag-')) {
                        cb.checked = false; // Uncheck all tags
                    }
                });
                
                // Re-apply filters
                filterInitiatives();
            });
            
            sidebar.appendChild(resetButton);
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
